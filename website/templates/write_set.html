{% extends "base.html" %}

{% block title %}Edit Study Set{% endblock %}

{% block content %}

<!--
  Tutorial link: https://www.youtube.com/watch?v=Hg80AjDNnJk
-->

<head>
  <title>Write mode</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <style>
    body {
      font-family: "Roboto", sans-serif;
      margin: 0;
      padding: 0;
    }
    
    .type-box {
      width: 60%;   /*make it 60% of the user's screen*/
      height: 60%;

      background-color: #f7f7f7;
      border: 2px solid #333;
      position: absolute;        /*specifies that the box is positioned relative to its nearest positioned ancestor (cory's nav bar)*/
      top: 50%;     /*centers it*/
      left: 50%;    /*centers it*/
      transform: translate(-50%, -50%); /*centers it*/
      display: flex;            /*allows to easily manipulate the layout and positioning of the elements inside the box*/
      flex-direction: column;   /*the flex items will be stacked vertically rather than horizontally*/
    }
    
    .type-box-header {
      border-bottom: 2px solid #333;
      padding: 10px;
      font-size: 24px;
      text-align: center;
    }
    
    .type-box-input {
      flex-grow: 1;             /* the input will grow and occupy more space if there is extra space available in the box*/
      padding: 10px;
      font-size: 18px;
      border: none;
      outline: none;
      background-color: transparent;
    }
  </style>
</head>

<body>

{% for term in cards %}
  <div class="type-box">
    <div class="type-box-header">{{ term }}</div>

    <input type = "text" id = "input_{{ loop.index }}"">
    
    <p class="type-box-input" id = "def_{{ loop.index }}" data-value = "{{ cards[term] }}"></p> 

  </div>

  <script>
    var inpField = document.querySelector('#input_{{ loop.index }}')    //grabs the input element from above
    var html_element = document.querySelector('#def_{{ loop.index }}'); // grab the paragraph element

    function convert_2_span(){
      //converts the definition into span elements 
      var definition = html_element.getAttribute('data-value');               // get the value of the data-value attribute

      console.log(definition);

      //beginning of process to convert every character of the definition (definition) into spans
      var span_elements = ''; 

      definition.split('').forEach(char => {
        span_elements += '<span>' + char + '</span>'; // add a new span element for each character in the definition
      });

      html_element.innerHTML = span_elements // set the innerHTML property (the text) of the input element (the paragraph element) to the updated span_definition

      //end of process. now, the characters can be manipulated with JavaScript

      document.addEventListener("keydown", () => inpField.focus());
      html_element.addEventListener("click", () => inpField.focus());
    }
    convert_2_span();
    inpField.addEventListener("input", initTyping);





  </script>
{% endfor %}
</body>

{% endblock %}